{"version":3,"file":"kendo.dropdowntree.min.js","sources":["kendo.dropdowntree.js"],"sourcesContent":["(function(f, define){\n    define('dropdowntree/treeview',[ \"kendo.treeview\" ], f);\n})(function(){\n\n(function($, undefined) {\n\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        keys = kendo.keys,\n        DISABLED = \"k-disabled\",\n        SELECT = \"select\",\n        CHECKED = \"checked\",\n        DATABOUND = \"dataBound\",\n        CLICK = \"click\",\n        NS = \".kendoTreeView\",\n        INDETERMINATE = \"indeterminate\",\n        NAVIGATE = \"navigate\",\n        subGroup,\n        TreeView = ui.TreeView;\n\n        function contentChild(filter) {\n            return function(node) {\n                var result = node.children(\".k-animation-container\");\n\n                if (!result.length) {\n                    result = node;\n                }\n\n                return result.children(filter);\n            };\n        }\n\n        subGroup = contentChild(\".k-group\");\n\n    var Tree = TreeView.extend({\n        init: function(element, options, dropdowntree) {\n            var that = this;\n\n            that.dropdowntree = dropdowntree;\n            that._nodesToLoad = 0;\n\n            TreeView.fn.init.call(that, element, options);\n            if(that.dropdowntree._isMultipleSelection()){\n                that.wrapper.on(CLICK + NS, '.k-in.k-selected', that._clickSelectedItem.bind(that));\n            }\n        },\n\n        _checkOnSelect: function (e) {\n            if (!e.isDefaultPrevented()) {\n                var dataItem = this.dataItem(e.node);\n\n                dataItem.set(\"checked\", !dataItem.checked);\n            }\n        },\n\n        _setCheckedValue: function (node, value){\n            node.set(CHECKED, value);\n        },\n\n        _click: function (e) {\n            var that = this;\n\n            if(that.dropdowntree._isMultipleSelection()){\n                that.one(\"select\", that._checkOnSelect);\n            }\n            TreeView.fn._click.call(that, e);\n        },\n\n        _clickSelectedItem: function (e) {\n            var that = this,\n            node = $(e.currentTarget);\n\n            that.one(\"select\", that._checkOnSelect);\n            if (!that._trigger(SELECT, node)) {\n                that.dataItem(node).set(\"selected\", false);\n            }\n        },\n\n        defaultrefresh: function(e) {\n            var that = this;\n            var node = e.node;\n            var action = e.action;\n            var items = e.items;\n            var parentNode = this.wrapper;\n            var options = this.options;\n            var loadOnDemand = options.loadOnDemand;\n            var checkChildren = options.checkboxes && options.checkboxes.checkChildren;\n            var i;\n\n            if (this._skip) {\n                return;\n            }\n\n            if (e.field) {\n                if (!items[0] || !items[0].level) {\n                    return;\n                }\n\n                return this._updateNodes(items, e.field);\n            }\n\n            if (node) {\n                parentNode = this.findByUid(node.uid);\n                this._progress(parentNode, false);\n            }\n\n            if (checkChildren && action != \"remove\") {\n                var bubble = false;\n\n                for (i = 0; i < items.length; i++) {\n                    if (\"checked\" in items[i]) {\n                        bubble = true;\n                        break;\n                    }\n                }\n\n                if (!bubble && node && node.checked) {\n                    for (i = 0; i < items.length; i++) {\n                        items[i].checked = true;\n                    }\n                }\n            }\n\n            if (action == \"add\") {\n                this._appendItems(e.index, items, parentNode);\n            } else if (action == \"remove\") {\n                this._remove(this.findByUid(items[0].uid), false);\n            } else if (action == \"itemchange\") {\n                this._updateNodes(items);\n            } else if (action == \"itemloaded\") {\n                this._nodesToLoad --;\n                this._refreshChildren(parentNode, items, e.index);\n            } else {\n                this._refreshRoot(items);\n            }\n\n            if (action != \"remove\") {\n                for (i = 0; i < items.length; i++) {\n                    if (!loadOnDemand || items[i].expanded) {\n                        if(items[i].hasChildren){\n                            that._nodesToLoad ++;\n                        }\n                        items[i].load();\n                    }\n                }\n            }\n            if(this._nodesToLoad === 0){\n                this.dropdowntree.trigger(\"allNodesAreLoaded\");\n            }\n            that.wrapper.attr(\"role\", \"tree\");\n            that.wrapper.find(\">ul\").attr(\"role\", \"none\");\n            this.trigger(DATABOUND, { node: node ? parentNode : undefined });\n            this.dropdowntree._treeViewDataBound({ node: node ? parentNode : undefined, sender: this });\n            if (this.options.checkboxes.checkChildren) {\n                this.updateIndeterminate();\n            }\n        },\n\n        _previousVisible: function(node) {\n            var that = this,\n                lastChild,\n                result;\n\n            if (!node.length || node.prev().length) {\n                if (node.length) {\n                    result = node.prev();\n                } else {\n                    result = that.root.children().last();\n                }\n\n                while (that._expanded(result)) {\n                    lastChild = subGroup(result).children().last();\n\n                    if (!lastChild.length) {\n                        break;\n                    }\n\n                    result = lastChild;\n                }\n            } else {\n                result = that.parent(node) || node;\n\n                if(!result.length){\n                    if (that.dropdowntree.checkAll && that.dropdowntree.checkAll.is(\":visible\")) {\n                        that.dropdowntree.checkAll.find(\".k-checkbox\").trigger(\"focus\");\n                    } else if(that.dropdowntree.filterInput){\n                        that.dropdowntree.filterInput.trigger(\"focus\");\n                    } else {\n                        that.dropdowntree.wrapper.trigger(\"focus\");\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                target,\n                focused = that.current(),\n                expanded = that._expanded(focused),\n                checkbox = focused.find(\".k-checkbox-wrapper\").first().find(\":checkbox\"),\n                rtl = kendo.support.isRtl(that.element);\n\n            if (e.target != e.currentTarget) {\n                return;\n            }\n\n            if ((!rtl && key == keys.RIGHT) || (rtl && key == keys.LEFT)) {\n                if (expanded) {\n                    target = that._nextVisible(focused);\n                } else if (!focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                    that.expand(focused);\n                }\n            } else if ((!rtl && key == keys.LEFT) || (rtl && key == keys.RIGHT)) {\n                if (expanded && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                    that.collapse(focused);\n                } else {\n                    target = that.parent(focused);\n\n                    if (!that._enabled(target)) {\n                        target = undefined;\n                    }\n                }\n            } else if (key == keys.DOWN) {\n                target = that._nextVisible(focused);\n            } else if (key == keys.UP && !e.altKey) {\n                target = that._previousVisible(focused);\n            } else if (key == keys.HOME) {\n                target = that._nextVisible($());\n            } else if (key == keys.END) {\n                target = that._previousVisible($());\n            } else if (key == keys.ENTER && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                if (!focused.find(\".k-in\").first().hasClass(\"k-selected\")) {\n                    if (!that._trigger(SELECT, focused)) {\n                        that.select(focused);\n                    }\n                }\n            } else if (key == keys.SPACEBAR && checkbox.length && !focused.find(\".k-in\").first().hasClass(DISABLED)) {\n                checkbox.prop(CHECKED, !checkbox.prop(CHECKED))\n                    .data(INDETERMINATE, false)\n                    .prop(INDETERMINATE, false);\n\n                that._checkboxChange({ target: checkbox });\n\n                target = focused;\n            } else if ((e.altKey && key === keys.UP) || key === keys.ESC) {\n                that._closePopup();\n            } else if ( key === keys.TAB) {\n                e.preventDefault();\n                that._closePopup();\n            }\n\n            if (target) {\n                e.preventDefault();\n\n                if (focused[0] != target[0]) {\n                    that._trigger(NAVIGATE, target);\n                    that.current(target);\n                }\n            }\n        },\n\n        _closePopup: function() {\n            this.dropdowntree.close();\n            this.dropdowntree.wrapper.trigger(\"focus\");\n        },\n\n        refresh: function(e){\n            this.defaultrefresh(e);\n\n            if(this.dropdowntree.options.skipUpdateOnBind){\n                return;\n            }\n\n            if (e.action === \"itemchange\") {\n                if (this.dropdowntree._isMultipleSelection()) {\n                    if(e.field === \"checked\"){\n                        this.dropdowntree._checkValue(e.items[0]);\n                    }\n                } else {\n                    if(e.field !== \"checked\" && e.field !== \"expanded\" && e.items[0].selected){\n                        this.dropdowntree._selectValue(e.items[0]);\n                    }\n                }\n            } else {\n                this.dropdowntree.refresh(e);\n            }\n        }\n\n    });\n\n    kendo.ui._dropdowntree = Tree;\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n(function(f, define){\n    define('kendo.dropdowntree',[ \"./dropdowntree/treeview\", \"kendo.popup\", \"kendo.binder\", \"kendo.html.chip\", \"kendo.html.chiplist\", \"kendo.html.button\", \"kendo.html.input\" ], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"dropdowntree\",\n    name: \"DropDownTree\",\n    category: \"web\",\n    description: \"The DropDownTree widget displays a hierarchy of items and allows the selection of single or multiple items.\",\n    depends: [ \"treeview\", \"popup\", \"binder\", \"html.chip\", \"html.chiplist\", \"html.button\", \"html.input\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        html = kendo.html,\n        Widget = ui.Widget,\n        TreeView = ui._dropdowntree,\n        ObservableArray = kendo.data.ObservableArray,\n        ObservableObject = kendo.data.ObservableObject,\n        extend = $.extend,\n        activeElement = kendo._activeElement,\n        ns = \".kendoDropDownTree\",\n        keys = kendo.keys,\n        support = kendo.support,\n        HIDDENCLASS = \"k-hidden\",\n        WIDTH = \"width\",\n        browser = support.browser,\n        outerWidth = kendo._outerWidth,\n        DOT = \".\",\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        STATEDISABLED = \"k-disabled\",\n        ARIA_DISABLED = \"aria-disabled\",\n        HOVER = \"k-hover\",\n        FOCUSED = \"k-focus\",\n        HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n        TABINDEX = \"tabindex\",\n        CLICK = \"click\",\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        CHANGE = \"change\",\n        quotRegExp = /\"/g,\n\n        CHIP = \".k-chip\";\n\n    var DropDownTree = kendo.ui.Widget.extend( {\n        init: function(element, options) {\n            this.ns = ns;\n\n            kendo.ui.Widget.fn.init.call(this, element, options);\n            this._selection = this._getSelection();\n            this._focusInputHandler = this._focusInput.bind(this);\n            this._initial = this.element.val();\n\n            this._values = [];\n\n            var value = this.options.value;\n\n            if (value === null || !value.length) {\n                this._noInitialValue = true;\n            }\n\n            if (!this._isNullorUndefined(value)) {\n                this._valueMethodCalled = true;\n                this._values = Array.isArray(value) ? value.slice(0) : [value];\n            }\n\n            this._inputTemplate();\n\n            this._accessors();\n            this._setTreeViewOptions(this.options);\n            this._dataSource();\n            this._selection._initWrapper();\n            this._applyCssClasses();\n            this._placeholder(true);\n            this._tabindex();\n            this.wrapper.data(TABINDEX, this.wrapper.attr(TABINDEX));\n\n            this.tree = $('<div/>')\n            .attr({\n                tabIndex: -1,\n                \"aria-hidden\": true\n            });\n\n            this.list = $(\"<div class='k-list-container'/>\")\n                .append(this.tree);\n\n            this._header();\n            this._noData();\n            this._footer();\n            this._reset();\n            this._popup();\n            this.popup.one(\"open\", this._popupOpen.bind(this));\n            this._clearButton();\n            this._filterHeader();\n            this._treeview();\n\n            this._renderFooter();\n\n            this._checkAll();\n            this._enable();\n            this._toggleCloseVisibility();\n\n            this._aria();\n\n            if (!this.options.autoBind) {\n                var text = options.text || \"\";\n                if (!this._isNullorUndefined(options.value)) {\n                    this._preselect(options.value);\n                } else if (text) {\n                    this._textAccessor(text);\n                } else if (options.placeholder) {\n                    this._placeholder(true);\n                }\n            }\n\n            var disabled = $(this.element).parents(\"fieldset\").is(':disabled');\n\n            if (disabled) {\n                this.enable(false);\n            }\n            this._valueMethodCalled = false;\n            kendo.notify(this);\n        },\n\n        _preselect: function(data, value){\n            this._selection._preselect(data, value);\n        },\n\n        _setTreeViewOptions: function(options) {\n            var treeviewOptions = {\n                autoBind: options.autoBind,\n                checkboxes: options.checkboxes,\n                dataImageUrlField: options.dataImageUrlField,\n                dataSpriteCssClassField: options.dataSpriteCssClassField,\n                dataTextField: options.dataTextField,\n                dataUrlField: options.dataUrlField,\n                loadOnDemand: options.loadOnDemand,\n                size: options.size\n            };\n\n            this.options.treeview = $.extend({}, treeviewOptions, this.options.treeview);\n\n            if (options.template) {\n                this.options.treeview.template = options.template;\n            }\n\n            if (options.size) {\n                this.options.treeview.size = options.size;\n            }\n        },\n\n        _dataSource: function() {\n            var rootDataSource = this.options.dataSource;\n\n            this.dataSource = kendo.data.HierarchicalDataSource.create(rootDataSource);\n            if (rootDataSource) {\n                $.extend(this.options.treeview,{\n                    dataSource: this.dataSource\n                });\n            }\n        },\n\n        _popupOpen: function() {\n            var popup = this.popup;\n            popup.wrapper = kendo.wrap(popup.element);\n        },\n\n        _getSelection: function() {\n            if (this._isMultipleSelection()) {\n                this.options._altname = \"MultiSelectDropDownTree\";\n                return new ui.DropDownTree.MultipleSelection(this);\n            } else {\n                return new ui.DropDownTree.SingleSelection(this);\n            }\n        },\n\n        setDataSource: function(dataSource) {\n            this._isDataSourceSet = true;\n            if(this._tags){\n                this._noInitialValue = true;\n                this.setValue([]);\n                this._tags.empty();\n                this.span.show();\n                this._multipleTags.empty();\n            }\n            this.dataSource = dataSource;\n            this.treeview.setDataSource(dataSource);\n            this._isDataSourceSet = false;\n        },\n\n        _isMultipleSelection: function() {\n            return this.options && (this.options.treeview.checkboxes || this.options.checkboxes);\n        },\n\n        options: {\n            name: \"DropDownTree\",\n            animation: {},\n            autoBind: true,\n            autoClose: true,\n            autoWidth: false,\n            clearButton: true,\n            dataTextField: \"\",\n            dataValueField: \"\",\n            dataImageUrlField: \"\",\n            dataSpriteCssClassField: \"\",\n            dataUrlField: \"\",\n            delay: 500,\n            enabled: true,\n            enforceMinLength: false,\n            filter: \"none\",\n            height: 200,\n            ignoreCase: true,\n            index: 0,\n            loadOnDemand: false,\n            messages: {\n                \"singleTag\": \"item(s) selected\",\n                \"clear\": \"clear\",\n                \"deleteTag\": \"delete\",\n                \"noData\": \"No data found.\"\n            },\n            minLength: 1,\n            checkboxes: false,\n            noDataTemplate: true,\n            placeholder: \"\",\n            checkAll:false,\n            checkAllTemplate: \"Check all\",\n            tagMode: \"multiple\",\n            template: null,\n            text: null,\n            treeview: {},\n            valuePrimitive: false,\n            footerTemplate: \"\",\n            headerTemplate: \"\",\n            value: null,\n            valueTemplate: null,\n            popup: null,\n            filterLabel: null,\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n\n        events: [\n            \"open\",\n            \"close\",\n            \"dataBound\",\n            CHANGE,\n            \"select\",\n            \"filtering\"\n        ],\n\n        focus: function() {\n            this.wrapper.trigger(\"focus\");\n        },\n\n        dataItem: function (node){\n            return this.treeview.dataItem(node);\n        },\n\n        readonly: function(readonly) {\n            this._editable({\n                readonly: readonly === undefined ? true : readonly,\n                disable: false\n            });\n            this._toggleCloseVisibility();\n        },\n\n        enable: function(enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined ? true : enable)\n            });\n            this._toggleCloseVisibility();\n        },\n\n        toggle: function(open) {\n            this._toggle(open);\n        },\n\n        open: function() {\n            var popup = this.popup;\n\n            if(!this.options.autoBind && !this.dataSource.data().length){\n                this.treeview._progress(true);\n                if(this._isFilterEnabled()){\n                    this._search();\n                } else {\n                    this.dataSource.fetch();\n                }\n            }\n\n            if (popup.visible() || !this._allowOpening()) {\n                return;\n            }\n\n            if(this._isMultipleSelection()){\n                popup.element.addClass(\"k-multiple-selection\");\n            }\n            popup.element.addClass(\"k-popup-dropdowntree\");\n\n            popup.one(\"activate\", this._focusInputHandler);\n            popup._hovered = true;\n            popup.open();\n        },\n\n        close: function() {\n            this.popup.close();\n        },\n\n        search: function(word) {\n            var options = this.options;\n            var filter;\n            clearTimeout(this._typingTimeout);\n\n            if ((!options.enforceMinLength && !word.length) || word.length >= options.minLength) {\n                filter = this._getFilter(word);\n                if(this.trigger(\"filtering\", { filter: filter }) ||\n                 Array.isArray(this.options.dataTextField)){\n                    return;\n                }\n\n                this._filtering = true;\n                this.treeview.dataSource.filter(filter);\n            }\n        },\n\n        _getFilter: function (word){\n            return {\n                field: this.options.dataTextField,\n                operator: this.options.filter,\n                value: word,\n                ignoreCase: this.options.ignoreCase\n              };\n        },\n\n        refresh: function() {\n            var data = this.treeview.dataSource.flatView();\n            this._renderFooter();\n            this._renderNoData();\n            if (this.filterInput && this.checkAll) {\n                this.checkAll.toggle(!this.filterInput.val().length);\n            }\n\n            this.tree.toggle(!!data.length);\n            $(this.noData).toggle(!data.length);\n        },\n\n        setOptions: function(options) {\n\n            if(this.options.checkboxes != options.checkboxes){\n                delete options.checkboxes;\n                window.console.warn('setOptions method can not be used to set the checkboxes option in DropDownTree');\n            }\n\n            Widget.fn.setOptions.call(this, options);\n\n            this._setTreeViewOptions(options);\n            this._dataSource();\n            if (this.options.treeview || options.size) {\n                this.treeview.setOptions(this.options.treeview);\n            }\n\n            if (options.height && this.tree) {\n                this.tree.css('max-height', options.height);\n            }\n\n            this._header();\n            this._noData();\n            this._footer();\n\n            this._renderFooter();\n            this._renderNoData();\n            if (this.span && (this._isMultipleSelection() || this.span.hasClass(\"k-readonly\"))) {\n                this._placeholder(true);\n            }\n            this._inputTemplate();\n            this._accessors();\n            this._filterHeader();\n            this._checkAll();\n            this._enable();\n            if (options && (options.enable || options.enabled)) {\n                this.enable(true);\n            }\n            this._clearButton();\n        },\n\n        destroy: function() {\n            kendo.ui.Widget.fn.destroy.call(this);\n            if(this.treeview){\n                this.treeview.destroy();\n            }\n            this.popup.destroy();\n\n            this.wrapper.off(ns);\n            this._clear.off(ns);\n            if (this.filterInput) {\n                this.filterInput.off(ns);\n            }\n\n            if(this.tagList){\n                this.tagList.off(ns);\n            }\n\n            kendo.unbind(this.tagList);\n            if (this.options.checkAll && this.checkAll) {\n                this.checkAll.off(ns);\n            }\n\n            if (this._form) {\n                this._form.off(\"reset\", this._resetHandler);\n            }\n        },\n\n        setValue: function(value) {\n            value = Array.isArray(value) || value instanceof ObservableArray ? value.slice(0) : [value];\n\n            this._values = value;\n        },\n\n        items: function() {\n            return this.treeview.items();\n        },\n\n        value: function(value) {\n            var that = this;\n\n            if(value){\n                if(that.filterInput && that.dataSource._filter){\n                    that._filtering = true;\n                    that.dataSource.filter({});\n                } else if (!that.dataSource.data().length || !that.treeview.dataSource.data().length){\n                    that.dataSource.fetch(function() {\n                        if(that.options.loadOnDemand){\n                            that._selection._setValue(value);\n                        } else {\n                            that.one('allNodesAreLoaded', function(){\n                                that._selection._setValue(value);\n                            });\n                        }\n                    });\n\n                    return;\n                }\n            }\n\n            return that._selection._setValue(value);\n        },\n\n        text: function(text) {\n            var loweredText;\n            var ignoreCase = this.options.ignoreCase;\n\n            text = text === null ? \"\" : text;\n\n            if (text !== undefined && !this._isMultipleSelection()) {\n                if (typeof text !== \"string\") {\n                    this._textAccessor(text);\n                    return;\n                }\n\n                loweredText = ignoreCase ? text : text.toLowerCase();\n\n                this._selectItemByText(loweredText);\n\n                this._textAccessor(loweredText);\n            } else {\n                return this._textAccessor();\n            }\n        },\n\n        _aria: function() {\n            var input = this.wrapper.find(\"span.k-input-inner\");\n\n            this.wrapper.attr({\n                \"aria-haspopup\": \"tree\",\n                \"aria-expanded\": false,\n                \"aria-owns\": this.treeview.element.attr(\"id\"),\n                \"role\": \"listbox\"\n            });\n\n            this._activeId = kendo.guid();\n            this._ariaLabel(this.wrapper);\n\n            if (this.filterInput && this.options.filterLabel) {\n                this.filterInput.attr(\"aria-label\", this.options.filterLabel);\n            }\n\n            if(!this.options.checkboxes && input.text().length) {\n                input.attr(\"role\", \"option\");\n                input.attr(\"aria-selected\", \"true\");\n                input.attr(\"id\", this._activeId);\n\n                this.wrapper.attr(\"aria-activedescendant\", this._activeId);\n            } else if(this.options.checkboxes) {\n                this.wrapper.attr({\n                    \"aria-multiselectable\": true,\n                    \"aria-describedby\": this.tagList[0].id\n                });\n\n                this.tagList.attr(\"role\", \"none\");\n            }\n        },\n\n        _header: function() {\n            var list = this;\n            var header = $(list.header);\n            var template = list.options.headerTemplate;\n\n            this._angularElement(header, \"cleanup\");\n            kendo.destroy(header);\n            header.remove();\n\n            if (!template) {\n                list.header = null;\n                return;\n            }\n\n            var headerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n            header = $(headerTemplate({}));\n\n            list.header = header[0] ? header : null;\n            list.list.prepend(header);\n\n            this._angularElement(list.header, \"compile\");\n        },\n\n        _noData: function() {\n            var list = this;\n            var noData = $(list.noData);\n            var template = list.options.noDataTemplate === true ?  list.options.messages.noData : list.options.noDataTemplate;\n\n            list.angular(\"cleanup\", function() { return { elements: noData }; });\n            kendo.destroy(noData);\n            noData.remove();\n\n            if (!template) {\n                list.noData = null;\n                return;\n            }\n\n            list.noData = $('<div class=\"k-no-data\" style=\"display: none;\"></div>').appendTo(list.list);\n            list.noDataTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _renderNoData: function() {\n            var list = this;\n            var noData = list.noData;\n\n            if (!noData) {\n                return;\n            }\n\n            this._angularElement(noData, \"cleanup\");\n            noData.html(list.noDataTemplate({ instance: list }));\n            this._angularElement(noData, \"compile\");\n        },\n\n        _footer: function() {\n            var list = this;\n            var footer = $(list.footer);\n            var template = list.options.footerTemplate;\n\n            this._angularElement(footer, \"cleanup\");\n            kendo.destroy(footer);\n            footer.remove();\n\n            if (!template) {\n                list.footer = null;\n                return;\n            }\n\n            list.footer = $('<div class=\"k-footer\"></div>').appendTo(list.list);\n            list.footerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _renderFooter: function() {\n            var list = this;\n            var footer = list.footer;\n\n            if (!footer) {\n                return;\n            }\n\n            this._angularElement(footer, \"cleanup\");\n            footer.html(list.footerTemplate({ instance: list }));\n            this._angularElement(footer, \"compile\");\n        },\n\n        _enable: function() {\n            var that = this,\n                options = that.options,\n                disabled = that.element.is(\"[disabled]\");\n\n            if (options.enable !== undefined) {\n                options.enabled = options.enable;\n            }\n\n            if (!options.enabled || disabled) {\n                that.enable(false);\n            } else {\n                that.readonly(that.element.is(\"[readonly]\"));\n            }\n        },\n\n        _adjustListWidth: function() {\n            var that = this,\n                list = that.list,\n                width = list[0].style.width,\n                wrapper = that.wrapper,\n                computedStyle, computedWidth;\n\n            if (!list.data(WIDTH) && width) {\n                return;\n            }\n\n            computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n            computedWidth = parseFloat(computedStyle  && computedStyle.width) || outerWidth(wrapper);\n\n            if (computedStyle && browser.msie) { // getComputedStyle returns different box in IE.\n                computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n            }\n\n            if (list.css(\"box-sizing\") !== \"border-box\") {\n                width = computedWidth - (outerWidth(list) - list.width());\n            } else {\n                width = computedWidth;\n            }\n\n            list.css({\n                fontFamily: wrapper.css(\"font-family\"),\n                width: that.options.autoWidth ? \"auto\" : width,\n                minWidth: width,\n                whiteSpace: that.options.autoWidth ? \"nowrap\" : \"normal\"\n            })\n            .data(WIDTH, width);\n\n            return true;\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._resetHandler = function() {\n                    setTimeout(function() {\n                        that.value(that._initial);\n                    });\n                };\n\n                that._form = form.on(\"reset\", that._resetHandler);\n            }\n        },\n\n        _popup: function() {\n            var list = this;\n\n            if(list.options.checkboxes && list.options.checkAll) {\n                list.list.attr(\"role\", \"application\");\n            }\n\n            list.popup = new ui.Popup(list.list, extend({}, list.options.popup, {\n                anchor: list.wrapper,\n                open: list._openHandler.bind(list),\n                close: list._closeHandler.bind(list),\n                animation: list.options.animation,\n                isRtl: support.isRtl(list.wrapper),\n                autosize :list.options.autoWidth\n            }));\n        },\n\n        _angularElement: function(element, action) {\n            if (!element) {\n                return;\n            }\n\n            this.angular(action, function() {\n                return { elements: element };\n            });\n        },\n\n        _allowOpening: function() {\n            return this.options.noDataTemplate || this.treeview.dataSource.flatView().length;\n        },\n\n        _placeholder: function(show) {\n            if (this.span) {\n                this.span.toggleClass(\"k-readonly\", show).text(show? this.options.placeholder: \"\");\n            }\n\n            if(this.span.text().trim().length > 0) {\n                this.span.parent().attr({\n                    role: \"option\",\n                    \"aria-selected\": true\n                });\n            } else {\n                this.span.parent().removeAttr(\"role\");\n                this.span.parent().removeAttr(\"aria-selected\");\n            }\n        },\n\n        _currentValue: function(dataItem) {\n            var currentValue = this._value(dataItem);\n            if (!currentValue && currentValue !== 0) {\n                currentValue = dataItem;\n            }\n\n            return currentValue;\n        },\n\n        _checkValue: function(dataItem) {\n            var value = \"\";\n            var indexOfValue = -1;\n            var currentValue = this.value();\n            var isMultiple = this.options.tagMode === \"multiple\";\n\n            if (dataItem || dataItem === 0) {\n                if(dataItem.level){\n                    dataItem._level = dataItem.level();\n                }\n\n                value = this._currentValue(dataItem);\n\n                indexOfValue = currentValue.indexOf(value);\n            }\n\n            if (dataItem.checked) {\n                var alreadyAddedTag = $.grep(this._tags, function( item ) {\n                    return item.uid === dataItem._tagUid;\n                });\n\n                if (alreadyAddedTag.length){\n                    return;\n                }\n\n                var itemToAdd = new ObservableObject(dataItem.toJSON());\n                dataItem._tagUid = itemToAdd.uid;\n                this._tags.push(itemToAdd);\n\n                if (this._tags.length === 1) {\n                    this.span.hide();\n\n                    if (!isMultiple) {\n                        this._multipleTags.push(itemToAdd);\n                    }\n                }\n\n                if (indexOfValue === -1) {\n                    currentValue.push(value);\n                    this.setValue(currentValue);\n                }\n            } else {\n                var itemToRemove = this._tags.find(function(item){\n                    return item.uid === dataItem._tagUid;\n                });\n\n                var idx = this._tags.indexOf(itemToRemove);\n\n                if (idx !== -1) {\n                    this._tags.splice(idx, 1);\n                } else {\n                    this._treeViewCheckAllCheck(dataItem);\n                    return;\n                }\n\n                if (this._tags.length === 0) {\n                    this.span.show();\n                    if (!isMultiple) {\n                        this._multipleTags.splice(0, 1);\n                    }\n                }\n                if (indexOfValue !== -1) {\n                    currentValue.splice(indexOfValue, 1);\n                    this.setValue(currentValue);\n                }\n            }\n\n            this._treeViewCheckAllCheck(dataItem);\n            if (!this._preventChangeTrigger && !this._valueMethodCalled && !this._noInitialValue) {\n                this.trigger(CHANGE);\n            }\n\n            if (this.options.autoClose && this.popup.visible()) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n            }\n            this.popup.position();\n            this._toggleCloseVisibility();\n            this._updateSelectedOptions();\n        },\n\n        _updateSelectedOptions: function(){\n            if(this.element[0].tagName.toLowerCase() !== 'select'){\n                return;\n            }\n\n            var selectedItems = this._tags;\n            var options = '';\n            var dataItem = null;\n            var value = null;\n\n            if (selectedItems.length) {\n                for (var idx = 0; idx < selectedItems.length; idx++) {\n                    dataItem = selectedItems[idx];\n\n                    value = this._value(dataItem);\n                    options += this._option(value, this._text(dataItem), true);\n                }\n            }\n\n            this.element.html(options);\n        },\n\n        _option: function(dataValue, dataText, selected) {\n            var option = \"<option\";\n\n            if (dataValue !== undefined) {\n                dataValue += \"\";\n\n                if (dataValue.indexOf('\"') !== -1) {\n                    dataValue = dataValue.replace(quotRegExp, \"&quot;\");\n                }\n\n                option += ' value=\"' + dataValue + '\"';\n            }\n\n            if (selected) {\n                option += ' selected';\n            }\n\n            option += \">\";\n\n            if (dataText !== undefined) {\n                option += kendo.htmlEncode(dataText);\n            }\n\n            return option += \"</option>\";\n        },\n\n        _selectValue: function(dataItem) {\n            var value = \"\";\n            var text = \"\";\n\n            if (dataItem || dataItem === 0) {\n                if(dataItem.level){\n                    dataItem._level = dataItem.level();\n                }\n                text = this._text(dataItem) || dataItem;\n                value = this._currentValue(dataItem);\n            }\n\n            if (value === null) {\n                value = \"\";\n            }\n            this.setValue(value);\n            this._textAccessor(text, dataItem);\n            this._accessor(value);\n\n            if(!this._preventChangeTrigger && !this._valueMethodCalled){\n                this.trigger(CHANGE);\n            }\n            this._valueMethodCalled = false;\n\n            if (this.options.autoClose && this.popup.visible()) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n            }\n            this.popup.position();\n            this._toggleCloseVisibility();\n        },\n\n        _clearClick: function(e) {\n            e.stopPropagation();\n            this.wrapper.trigger(\"focus\");\n            this._clearTextAndValue();\n        },\n\n        _clearTextAndValue: function() {\n            this.setValue([]);\n            this._clearInput();\n            this._clearText();\n            this._selection._clearValue();\n            this.popup.position();\n            this._toggleCloseVisibility();\n        },\n\n        _clearText: function() {\n            if (this.options.placeholder) {\n                this._placeholder(true);\n            } else {\n                if (this.span) {\n                    this.span.html(\"\");\n                }\n            }\n        },\n\n        _inputTemplate: function() {\n            var template = this.options.valueTemplate;\n\n            if (!template) {\n                template = kendo.template('#:this._text(data)#', { useWithBlock: false }).bind(this);\n            } else {\n                template = kendo.template(template);\n            }\n\n            this.valueTemplate = template;\n        },\n\n        _assignInstance: function(text, value) {\n            var dataTextField = this.options.dataTextField;\n            var dataItem = {};\n\n            if (dataTextField) {\n                assign(dataItem, dataTextField.split(DOT), text);\n                assign(dataItem, this.options.dataValueField.split(DOT), value);\n                dataItem = new ObservableObject(dataItem);\n            } else {\n                dataItem = text;\n            }\n\n            return dataItem;\n        },\n\n        _textAccessor: function(text, dataItem) {\n            var valueTemplate = this.valueTemplate;\n            var span = this.span;\n\n            if (text === undefined) {\n                return span.text();\n            }\n\n            span.removeClass(\"k-readonly\");\n\n            if (!dataItem && ($.isPlainObject(text) || text instanceof ObservableObject)) {\n                dataItem = text;\n            }\n\n            if (!dataItem) {\n                dataItem = this._assignInstance(text, this._accessor());\n            }\n\n            var getElements = function() {\n                return {\n                    elements: span.get(),\n                    data: [ { dataItem: dataItem } ]\n                };\n            };\n\n            this.angular(\"cleanup\", getElements);\n\n            try {\n                span.html(valueTemplate(dataItem));\n            } catch(e) {\n                //dataItem has missing fields required in custom template\n                if (span) {\n                    span.html(\"\");\n                }\n            }\n\n            this.angular(\"compile\", getElements);\n        },\n\n        _accessors: function() {\n            var element = this.element;\n            var options = this.options;\n            var getter = kendo.getter;\n            var textField = element.attr(kendo.attr(\"text-field\"));\n            var valueField = element.attr(kendo.attr(\"value-field\"));\n\n            var getterFunction = function (field) {\n                if (Array.isArray(field)) {\n                    var count = field.length;\n                    var levels = $.map(field, function(x) {\n                        return function(d){ return d[x];};\n                    });\n\n                    return function (dataItem) {\n                        var level = dataItem._level;\n\n                        if(!level && level !== 0){\n                            return;\n                        }\n\n                        return levels[Math.min(level, count-1)](dataItem);\n                    };\n                } else {\n                    return getter(field);\n                }\n            };\n\n            if (!options.dataTextField && textField) {\n                options.dataTextField = textField;\n            }\n\n            if (!options.dataValueField && valueField) {\n                options.dataValueField = valueField;\n            }\n\n            options.dataTextField = options.dataTextField || \"text\";\n            options.dataValueField = options.dataValueField || \"value\";\n\n            this._text = getterFunction(options.dataTextField);\n            this._value = getterFunction(options.dataValueField);\n        },\n\n        _accessor: function(value, idx) {\n            return this._accessorInput(value, idx);\n        },\n\n        _accessorInput: function(value) {\n            var element = this.element[0];\n\n            if (value === undefined) {\n                return element.value;\n            } else {\n                if (value === null) {\n                    value = \"\";\n                }\n                element.value = value;\n            }\n        },\n\n        _clearInput: function() {\n            var element = this.element[0];\n            element.value = \"\";\n        },\n\n        _clearButton: function() {\n            var clearTitle = this.options.messages.clear;\n\n            if(!this._clear){\n                this._clear = $('<span unselectable=\"on\" class=\"k-clear-value\" title=\"' + clearTitle + '\"><span class=\"k-icon k-i-x\"></span></span>').attr({\n                    \"role\": \"button\",\n                    \"tabIndex\": -1\n                });\n            }\n\n            if (this.options.clearButton) {\n                this._clear.insertAfter(this.tagList || this.span.parent());\n                this.wrapper.addClass(\"k-dropdowntree-clearable\");\n            } else {\n                if (!this.options.clearButton) {\n                    this._clear.remove();\n                }\n            }\n        },\n\n        _toggleCloseVisibility: function() {\n            var isReadOnly = this.element.attr(READONLY);\n            var hasValue = (this.value() && !this._isMultipleSelection()) || this.value().length;\n            var valueDoesNotEqualPlaceHolder = this.element.val() && this.element.val() !== this.options.placeholder;\n\n            if ((!isReadOnly && (hasValue || valueDoesNotEqualPlaceHolder))) {\n                this._showClear();\n            } else {\n                this._hideClear();\n            }\n        },\n\n        _showClear: function() {\n            if(this._clear) {\n                this._clear.removeClass(HIDDENCLASS);\n            }\n        },\n\n        _hideClear: function() {\n            if(this._clear) {\n                this._clear.addClass(HIDDENCLASS);\n            }\n        },\n\n        _openHandler: function(e) {\n            this._adjustListWidth();\n\n            if (this.trigger(OPEN)) {\n                e.preventDefault();\n            } else {\n                 this.wrapper.attr(\"aria-expanded\", true);\n                 this.tree.attr(\"aria-hidden\", false).attr(\"role\", \"tree\");\n            }\n        },\n\n        _closeHandler: function(e) {\n            if (this.trigger(CLOSE)) {\n                e.preventDefault();\n            } else {\n                 this.wrapper.attr(\"aria-expanded\", false);\n                 this.tree.attr(\"aria-hidden\", true);\n            }\n        },\n\n        _treeview: function() {\n            var that = this;\n            if (that.options.height) {\n                that.tree.css('max-height',that.options.height);\n            }\n            that.tree.attr('id', kendo.guid());\n            that.treeview = new TreeView(that.tree, extend({ size: that.options.size }, that.options.treeview), that);\n            that.dataSource = that.treeview.dataSource;\n\n            that.treeview.bind(\"select\",function(e) {\n                that.trigger(\"select\", e);\n            });\n        },\n\n        _treeViewDataBound: function(e) {\n            if (e.node && this._prev && this._prev.length) {\n                e.sender.expand(e.node);\n            }\n\n            if(this._filtering){\n                if(!e.node){\n                    this._filtering = false;\n                }\n\n                if (!this._isMultipleSelection()) {\n                    this._deselectItem(e);\n                }\n                return;\n            }\n\n            if (!this.treeview) {\n                this.treeview = e.sender;\n            }\n\n            if (!e.node) {\n                var rootItems = e.sender.dataSource.data();\n\n                this._checkLoadedItems(rootItems);\n                if(this._noInitialValue){\n                    this._noInitialValue = false;\n                }\n            } else {\n                var rootItem = e.sender.dataItem(e.node);\n                if (rootItem) {\n                    var subItems = rootItem.children.data();\n                    this._checkLoadedItems(subItems);\n                }\n            }\n            this.trigger(\"dataBound\", e);\n        },\n\n        _deselectItem: function(e){\n            var items = [];\n            if (!e.node) {\n                items = e.sender.dataSource.data();\n            } else {\n                var rootItem = e.sender.dataItem(e.node);\n                if (rootItem) {\n                    items = rootItem.children.data();\n                }\n            }\n\n            for (var i = 0; i < items.length; i++) {\n                if (items[i].selected &&\n                    !this._valueComparer(items[i], this.value())) {\n                    items[i].set(\"selected\", false);\n                }\n            }\n        },\n\n        _checkLoadedItems: function(items) {\n            var value = this.value();\n\n            if(!items){\n                return;\n            }\n\n            for (var idx = 0; idx < items.length; idx++) {\n                this._selection._checkLoadedItem(items[idx], value);\n            }\n        },\n\n        _treeViewCheckAllCheck: function(dataItem) {\n            if (this.options.checkAll && this.checkAll) {\n                this._getAllChecked();\n\n                if (dataItem.checked) {\n                    this._checkCheckAll();\n                } else {\n                    this._uncheckCheckAll();\n                }\n            }\n        },\n\n        _checkCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n\n            if (this._allItemsAreChecked) {\n                checkAllCheckbox.prop('checked', true)\n                                .prop('indeterminate', false);\n            } else {\n                checkAllCheckbox.prop('indeterminate', true);\n            }\n        },\n\n        _uncheckCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n\n            if (this._allItemsAreUnchecked) {\n                checkAllCheckbox.prop('checked', false)\n                                .prop('indeterminate', false);\n            } else {\n                checkAllCheckbox.prop('indeterminate', true);\n            }\n        },\n\n        _filterHeader: function() {\n            var filterTemplate = '<div class=\"k-list-filter\">' +\n                '<span class=\"k-searchbox k-input k-input-md k-rounded-md k-input-solid\" type=\"text\" autocomplete=\"off\">' +\n                    '<span class=\"k-input-icon k-icon k-i-search\"></span>' +\n                '</span>' +\n            '</div>';\n\n            if (this.filterInput) {\n                this.filterInput\n                    .off(ns)\n                    .parent()\n                    .remove();\n\n                this.filterInput = null;\n            }\n\n            if (this._isFilterEnabled()) {\n                this._disableCheckChildren();\n\n                this.filterInput = $('<input class=\"k-input-inner\" type=\"text\" />')\n                    .attr({\n                        placeholder: this.element.attr(\"placeholder\"),\n                        title: this.element.attr(\"title\"),\n                        role: \"searchbox\",\n                        \"aria-haspopup\": \"listbox\",\n                        \"aria-autocomplete\": \"list\"\n                    });\n\n                this.filterInput.on(\"input\" , this._filterChange.bind(this));\n\n                $(filterTemplate)\n                    .insertBefore(this.tree)\n                    .find(\".k-searchbox\")\n                    .append(this.filterInput);\n            }\n        },\n\n        _filterChange: function() {\n            if (this.filterInput) {\n                this._search();\n            }\n        },\n\n        _disableCheckChildren: function() {\n            if (this._isMultipleSelection() && this.options.treeview.checkboxes && this.options.treeview.checkboxes.checkChildren) {\n                this.options.treeview.checkboxes.checkChildren = false;\n            }\n        },\n\n        _checkAll: function() {\n            if (this.checkAll) {\n                this.checkAll.find(\".k-checkbox-label, .k-checkbox\")\n                    .off(ns);\n                this.checkAll.remove();\n\n                this.checkAll = null;\n            }\n\n            if (this._isMultipleSelection() && this.options.checkAll) {\n                var checkAllCheckbox = html.renderCheckBox(extend({}, this.options, {\n                    label: \"Check All\",\n                    rounded: \"medium\"\n                }));\n                this.checkAll = $('<div class=\"k-check-all\">' + checkAllCheckbox + '</div>').insertBefore(this.tree);\n                this.checkAll.find(\".k-checkbox-label\").html(kendo.template(this.options.checkAllTemplate)({ instance: this }));\n                this.checkAll.find(\".k-checkbox\")\n                                .on(\"change\" + ns, this._changeCheckAll.bind(this))\n                                .on(\"keydown\" + ns, this._keydownCheckAll.bind(this));\n                this._disabledCheckedItems = [];\n                this._disabledUnCheckedItems = [];\n\n                this._getAllChecked();\n\n                if (!this._allItemsAreUnchecked) {\n                    this._checkCheckAll();\n                }\n            }\n        },\n\n        _changeCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            var isChecked = checkAllCheckbox.prop('checked');\n\n            this._updateCheckAll(isChecked);\n        },\n\n        _updateCheckAll: function(isChecked) {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            this._toggleCheckAllItems(isChecked);\n            checkAllCheckbox.prop('checked', isChecked);\n            if (this._disabledCheckedItems.length && this._disabledUnCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', true);\n            } else if (this._disabledCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', !isChecked);\n            } else if (this._disabledUnCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', isChecked);\n            } else {\n                checkAllCheckbox.prop('indeterminate', false);\n            }\n            this._disabledCheckedItems = [];\n            this._disabledUnCheckedItems = [];\n        },\n\n        _keydownCheckAll: function(e) {\n            var key = e.keyCode;\n            var altKey = e.altKey;\n\n            if ((altKey && key === keys.UP) || key === keys.ESC || key === keys.TAB) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.UP) {\n                if (this.filterInput) {\n                    this.filterInput.trigger(\"focus\");\n                } else {\n                    this.wrapper.trigger(\"focus\");\n                }\n\n                e.preventDefault();\n            }\n\n            if (key === keys.DOWN) {\n                if (this.tree && this.tree.is(\":visible\")) {\n                    this.tree.focus();\n                }\n\n                e.preventDefault();\n            }\n\n            if (key === keys.SPACEBAR && (browser.msie || browser.edge)) {\n                this._clickCheckAll();\n                e.preventDefault();\n            }\n        },\n\n        _clickCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            var isChecked = checkAllCheckbox.prop('checked');\n\n            this._updateCheckAll(!isChecked);\n\n            checkAllCheckbox.trigger(\"focus\");\n\n        },\n        //treeview\n        _dfs: function(items, action, prop) {\n            for (var idx = 0; idx < items.length; idx++) {\n                if (!this[action](items[idx], prop)) {\n                    break;\n                }\n                this._traverceChildren(items[idx], action, prop);\n            }\n        },\n\n        _uncheckItemByUid: function(uid) {\n            this._dfs(this.dataSource.data(), '_uncheckItemEqualsUid', uid);\n        },\n\n        _uncheckItemEqualsUid: function(item, uid) {\n            if (item.enabled !== false && item._tagUid == uid) {\n                item.set(\"checked\", false);\n                return false;\n            }\n            return true;\n        },\n\n        _selectItemByText: function(text) {\n            this._dfs(this.dataSource.data(), '_itemEqualsText', text);\n        },\n\n        _itemEqualsText: function(item, text) {\n            if (item.enabled !== false && this._text(item) === text) {\n                this.treeview.select(this.treeview.findByUid(item.uid));\n                this._selectValue(item);\n                return false;\n            }\n            return true;\n        },\n\n        _selectItemByValue: function(value) {\n            this._dfs(this.dataSource.data(), '_itemEqualsValue', value);\n        },\n\n        _itemEqualsValue: function(item, value) {\n            if (item.enabled !== false && this._valueComparer(item, value)) {\n\n                this.treeview.select(this.treeview.findByUid(item.uid));\n\n                return false;\n            }\n            return true;\n        },\n\n        _checkItemByValue: function(value) {\n            var items = this.treeview.dataItems();\n            for (var idx = 0; idx < value.length; idx++) {\n                this._dfs(items, '_checkItemEqualsValue', value[idx]);\n            }\n        },\n\n        _checkItemEqualsValue: function(item, value) {\n            if (item.enabled !== false && this._valueComparer(item, value)) {\n                    item.set(\"checked\", true);\n                return false;\n            }\n            return true;\n        },\n\n        _valueComparer: function(item, value) {\n            var itemValue = this._value(item);\n            var itemText;\n\n            if (!this._isNullorUndefined(itemValue)) {\n                if(this._isNullorUndefined(value)){\n                    return false;\n                }\n\n                var newValue = this._value(value);\n\n                if(newValue){\n                    return itemValue == newValue;\n                }else{\n                    return itemValue == value;\n                }\n            }\n\n            itemText = this._text(item);\n            if (itemText) {\n                if (this._text(value)) {\n                    return itemText == this._text(value);\n                } else {\n                    return itemText == value;\n                }\n            }\n\n            return false;\n        },\n\n        _isNullorUndefined: function(value){\n            return value === undefined || value === null;\n        },\n\n        _getAllChecked: function() {\n            this._allCheckedItems = [];\n            this._allItemsAreChecked = true;\n            this._allItemsAreUnchecked = true;\n\n            this._dfs(this.dataSource.data(), '_getAllCheckedItems');\n\n            return this._allCheckedItems;\n        },\n\n        _getAllCheckedItems: function(item) {\n            if (this._allItemsAreChecked) {\n                this._allItemsAreChecked =  item.checked;\n            }\n\n            if (this._allItemsAreUnchecked) {\n                this._allItemsAreUnchecked = !item.checked;\n            }\n\n            if (item.checked) {\n                this._allCheckedItems.push(item);\n            }\n            return true;\n        },\n\n        _traverceChildren: function(item, action, prop) {\n            var childrenField = (item._childrenOptions && item._childrenOptions.schema) ? item._childrenOptions.schema.data : null;\n            var subItems = item[childrenField] || item.items || item.children;\n\n            if (!subItems) {\n                return;\n            }\n\n            this._dfs(subItems, action, prop);\n        },\n\n        _toggleCheckAllItems: function(checked) {\n            this._dfs(this.dataSource.data(), '_checkAllCheckItem', checked);\n        },\n\n        _checkAllCheckItem: function(item, checked) {\n            if (item.enabled === false) {\n                if (item.checked) {\n                    this._disabledCheckedItems.push(item);\n                } else {\n                    this._disabledUnCheckedItems.push(item);\n                }\n            } else {\n                item.set(\"checked\", checked);\n            }\n            return true;\n        },\n\n        _isFilterEnabled: function() {\n            var filter = this.options.filter;\n            return filter && filter !== \"none\";\n        },\n\n        _editable: function(options) {\n            var that = this;\n            var element = that.element;\n            var disable = options.disable;\n            var readonly = options.readonly;\n            var wrapper = that.wrapper.add(that.filterInput).off(ns);\n            var dropDownWrapper = that.wrapper.off(HOVEREVENTS);\n            if (that._isMultipleSelection()) {\n                that.tagList.off(CLICK + ns);\n            }\n            if (!readonly && !disable) {\n                element.prop(DISABLED, false).prop(READONLY, false);\n\n                dropDownWrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n\n                that._clear.on(\"click\" + ns, that._clearClick.bind(that));\n                wrapper\n                    .attr(TABINDEX, wrapper.data(TABINDEX))\n                    .attr(ARIA_DISABLED, false)\n                    .on(\"keydown\" + ns, that._keydown.bind(that))\n                    .on(\"focusin\" + ns, that._focusinHandler.bind(that))\n                    .on(\"focusout\" + ns, that._focusoutHandler.bind(that));\n\n                that.wrapper.on(CLICK + ns, that._wrapperClick.bind(that));\n\n                if (this._isMultipleSelection()) {\n                    that.tagList.on(CLICK + ns, \"span.k-chip\", function(e) {\n                        $(e.currentTarget).addClass(FOCUSED);\n                    });\n\n                    that.tagList.on(CLICK + ns, \".k-i-x-circle\", function(e) {\n                        that._removeTagClick(e);\n                    });\n                }\n            } else if (disable) {\n                wrapper.removeAttr(TABINDEX);\n                dropDownWrapper\n                    .addClass(STATEDISABLED);\n            } else {\n                wrapper\n                    .attr(TABINDEX, wrapper.data(TABINDEX));\n\n                dropDownWrapper\n                    .removeClass(STATEDISABLED);\n\n                wrapper\n                    .on(\"focusin\" + ns, that._focusinHandler.bind(that))\n                    .on(\"focusout\" + ns, that._focusoutHandler.bind(that));\n            }\n\n            element.attr(DISABLED, disable)\n                   .attr(READONLY, readonly);\n\n            wrapper.attr(ARIA_DISABLED, disable);\n        },\n\n        _focusinHandler: function() {\n            this.wrapper.addClass(FOCUSED);\n            this._prevent = false;\n        },\n\n        _focusoutHandler: function() {\n            var that = this;\n\n            if (this._isMultipleSelection()) {\n                this.tagList.find(DOT + FOCUSED).removeClass(FOCUSED);\n            }\n            if (!that._prevent) {\n                this.wrapper.removeClass(FOCUSED);\n                that._prevent = true;\n                that.element.trigger(\"blur\");\n            }\n        },\n\n        _toggle: function(open) {\n            open = open !== undefined ? open : !this.popup.visible();\n\n            this[open ? OPEN : CLOSE]();\n        },\n\n        _wrapperClick: function(e) {\n            e.preventDefault();\n            this.popup.unbind(\"activate\", this._focusInputHandler);\n            this._focused = this.wrapper;\n            this._prevent = false;\n            this._toggle();\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVER, e.type === \"mouseenter\");\n        },\n\n        _focusInput: function() {\n            if (this.filterInput) {\n                this.filterInput.trigger(\"focus\");\n            } else if (this.checkAll) {\n                this.checkAll.find(\".k-checkbox\").trigger(\"focus\");\n            } else if (this.tree.is(\":visible\")) {\n                this.tree[0].focus({preventScroll: true});\n                this._ie11PreventScrollOnFocus();\n            }\n        },\n\n        _ie11PreventScrollOnFocus: function(){\n            if (browser.msie && browser.version == 11) {\n                var popup = this.popup;\n                popup._toggleResize(false);\n                setTimeout(function () {\n                    popup._toggleResize(true);\n                },50);\n            }\n        },\n\n        _keydown: function(e) {\n            var key = e.keyCode;\n            var altKey = e.altKey;\n            var isFilterInputActive;\n            var isWrapperActive;\n            var focused, tagItem;\n\n            var isPopupVisible = this.popup.visible();\n\n            if (this.filterInput) {\n                isFilterInputActive = this.filterInput[0] === activeElement();\n            }\n\n            if (this.wrapper) {\n                isWrapperActive = this.wrapper[0] === activeElement();\n            }\n\n            if(isWrapperActive){\n                if (key === keys.ESC) {\n                    this._clearTextAndValue();\n                    e.preventDefault();\n                    return;\n                }\n\n                if(this._isMultipleSelection()){\n                    if (key === keys.LEFT) {\n                        this._focusPrevTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.RIGHT) {\n                        this._focusNextTag();\n                          e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.HOME) {\n                        this._focusFirstTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.END) {\n                        this._focusLastTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.DELETE) {\n                        focused = this.tagList.find(DOT + FOCUSED).first();\n                        if(focused.length){\n                            tagItem = this._tags[focused.index()];\n                            this._removeTag(tagItem);\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.BACKSPACE) {\n                        focused = this.tagList.find(DOT + FOCUSED).first();\n                        if (focused.length) {\n                            tagItem = this._tags[focused.index()];\n                            this._removeTag(tagItem);\n                        } else {\n                            focused = this._focusLastTag();\n                            if (focused.length) {\n                                tagItem = this._tags[focused.index()];\n                                this._removeTag(tagItem);\n                            }\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n                }\n            }\n\n\n            if (isFilterInputActive) {\n                if (key === keys.ESC) {\n                    this._clearFilter();\n                }\n\n                if ((key === keys.UP) && !altKey) {\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                }\n\n                if(browser.msie && browser.version < 10){\n                    if (key === keys.BACKSPACE || key === keys.DELETE) {\n                        this._search();\n                    }\n                }\n\n                if(key === keys.TAB){\n                    this.close();\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                    return;\n                }\n            }\n\n            if ((altKey && key === keys.UP) || key === keys.ESC) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.ENTER && this._typingTimeout && this.filterInput && isPopupVisible) {\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.SPACEBAR && !isFilterInputActive) {\n                this._toggle(!isPopupVisible);\n                e.preventDefault();\n            }\n\n            if ((altKey && key === keys.DOWN) && !isPopupVisible) {\n                this.open();\n                e.preventDefault();\n            }\n\n            if ((key === keys.DOWN) && isPopupVisible) {\n                if (this.filterInput && !isFilterInputActive) {\n                    this.filterInput.trigger(\"focus\");\n                } else if (this.checkAll && this.checkAll.is(\":visible\")) {\n                    this.checkAll.find('input').trigger(\"focus\");\n                } else if(this.tree.is(\":visible\")) {\n                    this.tree[0].focus({preventScroll: true});\n                    this._ie11PreventScrollOnFocus();\n                }\n                e.preventDefault();\n            }\n\n            if(key === keys.TAB && isPopupVisible){\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n            }\n        },\n\n        _focusPrevTag: function() {\n            var focused = this.tagList.find(DOT + FOCUSED);\n            if (focused.length) {\n                var activedescendant = this._activeId;\n\n                focused.first()\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\")\n                    .prev(CHIP)\n                    .addClass(FOCUSED)\n                    .attr(\"id\", activedescendant);\n\n                this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n            } else {\n                this._focusLastTag();\n            }\n        },\n\n        _focusNextTag: function() {\n            var focused = this.tagList.find(DOT + FOCUSED);\n\n            if (focused.length) {\n                var activedescendant = this._activeId;\n\n                focused.first()\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\")\n                    .next(CHIP)\n                    .addClass(FOCUSED)\n                    .attr(\"id\", activedescendant);\n\n                this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n            } else {\n                this._focusFirstTag();\n            }\n        },\n\n        _focusFirstTag: function() {\n            var activedescendant = this._activeId;\n\n            this._clearDisabledTag();\n\n            var firstTag = this.tagList.children(CHIP).first()\n                .addClass(FOCUSED)\n                .attr(\"id\", activedescendant);\n\n            this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n\n            return firstTag;\n        },\n\n        _focusLastTag: function() {\n            var activedescendant = this._activeId;\n\n            this._clearDisabledTag();\n\n            var lastTag = this.tagList.children(CHIP).last()\n                .addClass(FOCUSED)\n                .attr(\"id\", activedescendant);\n\n            this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n\n            return lastTag;\n        },\n\n        _clearDisabledTag: function() {\n            this.tagList.find(DOT + FOCUSED).removeClass(FOCUSED).removeAttr(\"id\");\n        },\n\n        _search: function() {\n            var that = this;\n            clearTimeout(that._typingTimeout);\n\n            that._typingTimeout = setTimeout(function() {\n                var value = that.filterInput.val();\n\n                if (that._prev !== value) {\n                    that._prev = value;\n                    that.search(value);\n                }\n\n                that._typingTimeout = null;\n            }, that.options.delay);\n        },\n\n        _clearFilter: function() {\n            if(this.filterInput.val().length){\n                this.filterInput.val(\"\");\n                this._prev = \"\";\n                this._filtering = true;\n                this.treeview.dataSource.filter({});\n            }\n        },\n\n        _removeTagClick: function(e) {\n            e.stopPropagation();\n            var tagItem = this._tags[$(e.currentTarget.closest(CHIP)).index()];\n            this._removeTag(tagItem);\n        },\n\n        _removeTag: function(tagItem) {\n           if(!tagItem){\n                return;\n           }\n\n           var uid = tagItem.uid;\n           this._uncheckItemByUid(uid);\n        }\n    });\n\n    function assign(instance, fields, value) {\n        var idx = 0,\n            lastIndex = fields.length - 1,\n            field;\n\n        for (; idx < lastIndex; ++idx) {\n            field = fields[idx];\n\n            if (!(field in instance)) {\n                instance[field] = {};\n            }\n\n            instance = instance[field];\n        }\n\n        instance[fields[lastIndex]] = value;\n    }\n\n    ui.plugin(DropDownTree);\n\n    kendo.cssProperties.registerPrefix(\"DropDownTree\", \"k-picker-\");\n\n    kendo.cssProperties.registerValues(\"DropDownTree\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    kendo.cssProperties.registerPrefix(\"MultiSelectDropDownTree\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"MultiSelectDropDownTree\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    var SingleSelection = kendo.Class.extend({\n        init: function(view) {\n            this._dropdowntree = view;\n        },\n\n        _initWrapper: function() {\n            this._wrapper();\n            this._span();\n        },\n\n        _preselect: function(data){\n            var dropdowntree = this._dropdowntree;\n\n            dropdowntree._selectValue(data);\n        },\n\n        _wrapper: function() {\n            var dropdowntree = this._dropdowntree,\n                element = dropdowntree.element,\n                DOMelement = element[0],\n                wrapper;\n\n            wrapper = element.parent();\n\n            if (!wrapper.is(\"span.k-dropdowntree\")) {\n                wrapper = element.wrap(\"<span />\").parent();\n                wrapper[0].style.cssText = DOMelement.style.cssText;\n                wrapper[0].title = DOMelement.title;\n            }\n\n            dropdowntree._focused = dropdowntree.wrapper = wrapper\n                .addClass(\"k-dropdowntree k-picker\")\n                .addClass(DOMelement.className)\n                .removeClass('input-validation-error')\n                .removeClass('k-invalid')\n                .css(\"display\", \"\")\n                .attr({\n                    accesskey: element.attr(\"accesskey\"),\n                    unselectable: \"on\"\n                });\n\n            element.hide().removeAttr(\"accesskey\");\n        },\n\n        _span: function() {\n            var dropdowntree = this._dropdowntree,\n                wrapper = dropdowntree.wrapper,\n                SELECTOR = \"span.k-input-value-text\",\n                span;\n\n            span = wrapper.find(SELECTOR);\n\n            if (!span[0]) {\n                wrapper.append('<span unselectable=\"on\" class=\"k-input-inner\"><span class=\"k-input-value-text\"></span></span>' +\n                                html.renderButton('<button unselectable=\"on\" class=\"k-input-button\" aria-label=\"select\" tabindex=\"-1\"></button>', extend({}, dropdowntree.options, {\n                                    icon: \"arrow-s\",\n                                    shape: null,\n                                    rounded: null\n                                })))\n                       .append(dropdowntree.element);\n\n                span = wrapper.find(SELECTOR);\n            }\n\n            dropdowntree.span = span;\n            dropdowntree._arrow = wrapper.find(\".k-input-button\");\n            dropdowntree._arrowIcon = dropdowntree._arrow.find(\".k-icon\");\n        },\n\n        _setValue: function(value) {\n            var dropdowntree = this._dropdowntree;\n            var currentValue;\n\n            if (value === undefined || value === null) {\n                currentValue = dropdowntree._values.slice()[0];\n                value = (typeof currentValue === \"object\") ? currentValue : dropdowntree._accessor() || currentValue;\n                return value === undefined || value === null ? \"\" : value;\n            }\n            dropdowntree._valueMethodCalled = true;\n            if (value.length === 0) {\n                dropdowntree._clearTextAndValue();\n                dropdowntree._valueMethodCalled = false;\n                return;\n            }\n\n            dropdowntree._selectItemByValue(value);\n            dropdowntree._toggleCloseVisibility();\n        },\n\n        _clearValue: function() {\n            var dropdowntree = this._dropdowntree;\n            var selectedNode = dropdowntree.treeview.select();\n\n            if (dropdowntree.treeview.dataItem(selectedNode)) {\n                dropdowntree.treeview.dataItem(selectedNode).set('selected', false);\n                if(!dropdowntree._valueMethodCalled){\n                    dropdowntree.trigger(CHANGE);\n                }\n            }\n        },\n\n        _checkLoadedItem: function(tempItem, value) {\n            var dropdowntree = this._dropdowntree;\n\n            if (!dropdowntree._isNullorUndefined(value) && value!==\"\") {\n                if(dropdowntree._valueComparer(tempItem, value)){\n                    dropdowntree._preventChangeTrigger = true;\n                    tempItem.set(\"selected\", true);\n                    dropdowntree._preventChangeTrigger = false;\n                } else if (tempItem.selected){\n                    dropdowntree.treeview.select(dropdowntree.treeview.findByUid(tempItem.uid));\n                }\n\n            } else if (!value && tempItem.selected){\n                dropdowntree.treeview.select(dropdowntree.treeview.findByUid(tempItem.uid));\n            }\n        }\n    });\n\n    var MultipleSelection = kendo.Class.extend({\n        init: function(view) {\n            this._dropdowntree = view;\n        },\n\n        _initWrapper: function() {\n            var dropdowntree = this._dropdowntree;\n\n            this._tagTemplate();\n            dropdowntree.element.attr(\"multiple\", \"multiple\").hide();\n            this._wrapper();\n            dropdowntree._tags = new ObservableArray([]);\n            dropdowntree._multipleTags = new ObservableArray([]);\n            this._tagList();\n            dropdowntree.span = $('<span unselectable=\"on\" class=\"k-input-inner\"><span class=\"k-input-value-text\"></span></span>').appendTo(dropdowntree.tagList).find(\".k-input-value-text\");\n\n        },\n\n        _preselect: function(data, value){\n            var dropdowntree = this._dropdowntree;\n            var valueToSelect = value || dropdowntree.options.value;\n\n            if (!Array.isArray(data) && !(data instanceof kendo.data.ObservableArray)) {\n                data = [data];\n            }\n\n            if ($.isPlainObject(data[0]) || data[0] instanceof kendo.data.ObservableObject || !dropdowntree.options.dataValueField) {\n                dropdowntree.dataSource.data(data);\n\n                dropdowntree.value(valueToSelect);\n            }\n        },\n\n        _tagTemplate: function() {\n            var dropdowntree = this._dropdowntree;\n            var options = dropdowntree.options;\n            var tagTemplate = options.valueTemplate;\n            var isMultiple = options.tagMode === \"multiple\";\n            var singleTag = options.messages.singleTag;\n\n            tagTemplate = tagTemplate ? kendo.template(tagTemplate) : dropdowntree.valueTemplate;\n\n            dropdowntree.valueTemplate = function(data) {\n                return html.renderChip('<span unselectable=\"on\" role=\"option\"' +\n                    'class=\"' + ((data.enabled === false) ? \"k-disabled\" : \"\") + '\"' +\n                    ((data.enabled === false) ? 'aria-disabled=\"true\"' : '') +\n                    '>' +\n                    '</span>', $.extend({}, options, {\n                            fillMode: \"solid\",\n                            themeColor: \"base\",\n                            rounded: \"medium\",\n                            attr: {\n                                unselectable: \"on\"\n                            },\n                            text: (isMultiple ?  tagTemplate(data) : ('<span unselectable=\"on\" data-bind=\"text: tags.length\"></span>' +\n                            '<span unselectable=\"on\">&nbsp;' + singleTag +'</span>' )),\n                            removable: isMultiple,\n                            removeIcon: \"x-circle\",\n                            removableAttr: {\n                                unselectable: \"on\",\n                                \"aria-hidden\": true,\n                                \"aria-label\": dropdowntree.options.messages.deleteTag,\n                                title: dropdowntree.options.messages.deleteTag\n                            }\n                        }));\n            };\n        },\n\n        _wrapper: function() {\n            var dropdowntree = this._dropdowntree,\n                element = dropdowntree.element,\n                wrapper = element.parent(\"span.k-dropdowntree\");\n\n            if (!wrapper[0]) {\n                wrapper = element.wrap('<span class=\"k-dropdowntree k-input\" unselectable=\"on\" />').parent();\n                wrapper[0].style.cssText = element[0].style.cssText;\n                wrapper[0].title = element[0].title;\n            }\n\n            dropdowntree.wrapper = wrapper.addClass(element[0].className).css(\"display\", \"\");\n        },\n\n        _tagList: function() {\n            var dropdowntree = this._dropdowntree,\n                tagList = dropdowntree.wrapper.children(\"div.k-input-values\");\n\n            if (!tagList[0]) {\n                var isMultiple = dropdowntree.options.tagMode === \"multiple\";\n                var tagCollection = isMultiple ? \"tags\": \"multipleTag\";\n\n                tagList = $(html.renderChipList('<div unselectable=\"on\" class=\"k-input-values\" data-template=\"tagTemplate\" data-bind=\"source: ' + tagCollection + '\" />', $.extend({}, dropdowntree.options))).appendTo(dropdowntree.wrapper);\n            }\n\n            dropdowntree.tagList = tagList;\n            dropdowntree.tagList.attr('id', kendo.guid() + \"_tagList\");\n            dropdowntree.wrapper.attr(\"aria-owns\", dropdowntree.tagList.attr('id'));\n            var viewModel = kendo.observable({\n                multipleTag: dropdowntree._multipleTags,\n                tags: dropdowntree._tags,\n                tagTemplate: dropdowntree.valueTemplate\n            });\n            kendo.bind(dropdowntree.tagList, viewModel);\n            dropdowntree.tagList.attr(\"data-stop\", true);\n        },\n\n        _setValue: function(value) {\n            var dropdowntree = this._dropdowntree;\n            var oldValues = dropdowntree._values;\n            if (value === undefined || value === null) {\n                return dropdowntree._values.slice();\n            }\n\n            dropdowntree.setValue(value);\n            dropdowntree._valueMethodCalled = true;\n            if (value.length) {\n                this._removeValues(oldValues, value);\n\n                dropdowntree._checkItemByValue(value);\n            } else {\n                dropdowntree._clearTextAndValue();\n            }\n\n            dropdowntree._valueMethodCalled = false;\n            dropdowntree._toggleCloseVisibility();\n        },\n\n        _removeValues: function(oldValues, value) {\n            var dropdowntree = this._dropdowntree;\n            var removedValues = this._getNewValues(oldValues, value);\n\n            for (var idx = 0; idx < removedValues.length; idx++) {\n                for (var j = 0; j < dropdowntree._tags.length; j++) {\n                    if (dropdowntree._valueComparer(dropdowntree._tags[j],removedValues[idx])){\n                        dropdowntree._uncheckItemByUid(dropdowntree._tags[j].uid);\n                    }\n                }\n            }\n        },\n\n        _getNewValues: function(oldValues, value){\n            var removedValues = [];\n\n            for (var idx = 0; idx < oldValues.length; idx++) {\n                if(value.indexOf(oldValues[idx]) === -1){\n                    removedValues.push(oldValues[idx]);\n                }\n            }\n\n            return removedValues;\n        },\n\n        _clearValue: function() {\n            var dropdowntree = this._dropdowntree;\n            var tagsArray = dropdowntree._tags.slice();\n\n            for (var idx = 0; idx < tagsArray.length; idx++) {\n                var uid = tagsArray[idx].uid;\n                dropdowntree._preventChangeTrigger = true;\n                dropdowntree._uncheckItemByUid(uid);\n            }\n\n            if (tagsArray.length) {\n                dropdowntree._preventChangeTrigger = false;\n                if(!dropdowntree._valueMethodCalled){\n                    dropdowntree.trigger(CHANGE);\n                }\n            }\n        },\n\n        _checkLoadedItem: function(tempItem, value) {\n            var dropdowntree = this._dropdowntree;\n\n            if (dropdowntree._noInitialValue && tempItem.checked) {\n                dropdowntree._checkValue(tempItem);\n                return;\n            }\n\n            if ((value.length || this._isDataSourceSet) &&\n                (value.indexOf(dropdowntree._currentValue(tempItem)) !== -1 || value.indexOf(tempItem)) !== -1 &&\n                !this._findTag(dropdowntree._currentValue(tempItem))) {\n                if (tempItem.checked) {\n                    dropdowntree._checkValue(tempItem);\n                } else {\n                    dropdowntree._preventChangeTrigger = true;\n                    tempItem.set(\"checked\", true);\n                    dropdowntree._preventChangeTrigger = false;\n                }\n            }\n        },\n\n        _findTag: function(tempItemValue) {\n            var dropdowntree = this._dropdowntree;\n\n            return dropdowntree._tags.find(function(item) {\n                return dropdowntree._valueComparer(item, tempItemValue);\n            });\n        }\n    });\n\n    kendo.ui.DropDownTree.SingleSelection = SingleSelection;\n    kendo.ui.DropDownTree.MultipleSelection = MultipleSelection;\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","$","window","kendo","jQuery","undefined","ui","keys","DISABLED","SELECT","CHECKED","DATABOUND","CLICK","NS","INDETERMINATE","NAVIGATE","subGroup","TreeView","contentChild","filter","node","result","children","length","Tree","extend","init","element","options","dropdowntree","that","this","_nodesToLoad","fn","call","_isMultipleSelection","wrapper","on","_clickSelectedItem","bind","_checkOnSelect","e","isDefaultPrevented","dataItem","set","checked","_setCheckedValue","value","_click","one","currentTarget","_trigger","defaultrefresh","action","items","parentNode","loadOnDemand","checkChildren","checkboxes","i","_skip","field","level","_updateNodes","findByUid","uid","_progress","bubble","_appendItems","index","_remove","_refreshChildren","_refreshRoot","expanded","hasChildren","load","trigger","attr","find","_treeViewDataBound","sender","updateIndeterminate","_previousVisible","lastChild","prev","root","last","_expanded","parent","checkAll","is","filterInput","_keydown","key","keyCode","target","focused","current","checkbox","first","rtl","support","isRtl","RIGHT","LEFT","_nextVisible","hasClass","expand","collapse","_enabled","DOWN","UP","altKey","HOME","END","ENTER","select","SPACEBAR","prop","data","_checkboxChange","ESC","_closePopup","TAB","preventDefault","close","refresh","skipUpdateOnBind","_checkValue","selected","_selectValue","_dropdowntree","amd","a1","a2","a3","__meta__","id","name","category","description","depends","html","Widget","ObservableArray","ObservableObject","activeElement","_activeElement","ns","HIDDENCLASS","WIDTH","browser","outerWidth","_outerWidth","DOT","READONLY","STATEDISABLED","ARIA_DISABLED","HOVER","FOCUSED","HOVEREVENTS","TABINDEX","OPEN","CLOSE","CHANGE","quotRegExp","CHIP","DropDownTree","_selection","_getSelection","_focusInputHandler","_focusInput","_initial","val","_values","_noInitialValue","_isNullorUndefined","_valueMethodCalled","Array","isArray","slice","_inputTemplate","_accessors","_setTreeViewOptions","_dataSource","_initWrapper","_applyCssClasses","_placeholder","_tabindex","tree","tabIndex","aria-hidden","list","append","_header","_noData","_footer","_reset","_popup","popup","_popupOpen","_clearButton","_filterHeader","_treeview","_renderFooter","_checkAll","_enable","_toggleCloseVisibility","_aria","autoBind","text","_preselect","_textAccessor","placeholder","disabled","parents","enable","notify","treeviewOptions","dataImageUrlField","dataSpriteCssClassField","dataTextField","dataUrlField","size","treeview","template","rootDataSource","dataSource","HierarchicalDataSource","create","wrap","_altname","MultipleSelection","SingleSelection","setDataSource","_isDataSourceSet","_tags","setValue","empty","span","show","_multipleTags","animation","autoClose","autoWidth","clearButton","dataValueField","delay","enabled","enforceMinLength","height","ignoreCase","messages","singleTag","clear","deleteTag","noData","minLength","noDataTemplate","checkAllTemplate","tagMode","valuePrimitive","footerTemplate","headerTemplate","valueTemplate","filterLabel","fillMode","rounded","events","focus","readonly","_editable","disable","toggle","open","_toggle","_isFilterEnabled","_search","fetch","visible","_allowOpening","addClass","_hovered","search","word","clearTimeout","_typingTimeout","_getFilter","_filtering","operator","flatView","_renderNoData","setOptions","console","warn","css","destroy","off","_clear","tagList","unbind","_form","_resetHandler","_filter","_setValue","loweredText","toLowerCase","_selectItemByText","input","aria-haspopup","aria-expanded","aria-owns","role","_activeId","guid","_ariaLabel","aria-multiselectable","aria-describedby","header","_angularElement","remove","prepend","angular","elements","appendTo","instance","footer","_adjustListWidth","width","style","computedStyle","computedWidth","getComputedStyle","parseFloat","msie","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","fontFamily","minWidth","whiteSpace","formId","form","closest","setTimeout","Popup","anchor","_openHandler","_closeHandler","autosize","toggleClass","trim","aria-selected","removeAttr","_currentValue","currentValue","_value","indexOfValue","isMultiple","_level","indexOf","alreadyAddedTag","grep","item","_tagUid","itemToAdd","toJSON","push","hide","itemToRemove","idx","splice","_treeViewCheckAllCheck","_preventChangeTrigger","position","_updateSelectedOptions","tagName","selectedItems","_option","_text","dataValue","dataText","option","replace","htmlEncode","_accessor","_clearClick","stopPropagation","_clearTextAndValue","_clearInput","_clearText","_clearValue","useWithBlock","_assignInstance","assign","split","removeClass","isPlainObject","getElements","get","getter","textField","valueField","getterFunction","count","levels","map","x","d","Math","min","_accessorInput","clearTitle","insertAfter","isReadOnly","hasValue","valueDoesNotEqualPlaceHolder","_showClear","_hideClear","_prev","_deselectItem","rootItems","_checkLoadedItems","rootItem","subItems","_valueComparer","_checkLoadedItem","_getAllChecked","_checkCheckAll","_uncheckCheckAll","checkAllCheckbox","_allItemsAreChecked","_allItemsAreUnchecked","filterTemplate","_disableCheckChildren","title","aria-autocomplete","_filterChange","insertBefore","renderCheckBox","label","_changeCheckAll","_keydownCheckAll","_disabledCheckedItems","_disabledUnCheckedItems","isChecked","_updateCheckAll","_toggleCheckAllItems","edge","_clickCheckAll","_dfs","_traverceChildren","_uncheckItemByUid","_uncheckItemEqualsUid","_itemEqualsText","_selectItemByValue","_itemEqualsValue","_checkItemByValue","dataItems","_checkItemEqualsValue","itemValue","itemText","newValue","_allCheckedItems","_getAllCheckedItems","childrenField","_childrenOptions","schema","_checkAllCheckItem","add","dropDownWrapper","_toggleHover","_focusinHandler","_focusoutHandler","_wrapperClick","_removeTagClick","_prevent","_focused","type","preventScroll","_ie11PreventScrollOnFocus","version","_toggleResize","isFilterInputActive","isWrapperActive","tagItem","isPopupVisible","_focusPrevTag","_focusNextTag","_focusFirstTag","_focusLastTag","DELETE","_removeTag","BACKSPACE","_clearFilter","activedescendant","next","_clearDisabledTag","firstTag","lastTag","fields","lastIndex","plugin","cssProperties","registerPrefix","registerValues","values","roundedValues","concat","Class","view","_wrapper","_span","DOMelement","cssText","className","accesskey","unselectable","SELECTOR","renderButton","icon","shape","_arrow","_arrowIcon","selectedNode","tempItem","_tagTemplate","_tagList","valueToSelect","tagTemplate","renderChip","themeColor","removable","removeIcon","removableAttr","aria-label","tagCollection","renderChipList","viewModel","observable","multipleTag","tags","oldValues","_removeValues","removedValues","_getNewValues","j","tagsArray","_findTag","tempItemValue"],"mappings":"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"}